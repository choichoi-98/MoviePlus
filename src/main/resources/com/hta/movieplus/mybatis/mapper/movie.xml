<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.hta.movieplus.mybatis.mapper.MovieMapper">

	<insert id="insert" parameterType="movie">
		INSERT INTO MOVIE
		(movie_Code, movie_Title, movie_Director, 
		  movie_Genre, movie_OpenDate, movie_Release)
		VALUES (#{movie_Code}, #{movie_Title}, #{movie_Director}
		      ,#{movie_Genre}, #{movie_OpenDate} , #{movie_Release} )
	</insert>
	
	<select id="select" resultType="movie">
		SELECT * FROM MOVIE
		WHERE movie_code = #{movie_Code}
	</select>
	
	<select id="selectMovieCode" resultType="java.lang.String">
		SELECT movie_code FROM MOVIE
	</select>
	
	<update id="updateActors">
		UPDATE MOVIE
		SET MOVIE_ACTORS = #{actors}
		, MOVIE_RUNTIME = #{showTm}
		, MOVIE_GRADE = #{watchGradeNm}
		WHERE
		movie_code = #{movieCd}
	</update>
	
	<select id="selectMovieTitle" resultType="movie">
		SELECT movie_Code, movie_Title, movie_Director
		FROM MOVIE
	</select>
	
	<update id="updatePoster">
		UPDATE MOVIE
		SET MOVIE_POSTER = #{posterUrl},
		MOVIE_STILL = #{stillUrl},
		MOVIE_PLOT = #{plotText}
		WHERE
		MOVIE_CODE = #{codeNo}
		
	</update>
	
	<select id="getMovieListAll" resultType="movie">
		SELECT MOVIE_CODE, MOVIE_TITLE, MOVIE_SCREEN
		FROM MOVIE
	</select>
	
	<select id="getListcount" resultType="int">
		select count(*) from movie
	</select>
	
	<select id="getMovieList" resultType="movie">
SELECT *
FROM (
    SELECT ROWNUM AS row_num, MOVIE_CODE, MOVIE_TITLE, MOVIE_DIRECTOR, MOVIE_SCREEN
    FROM (
        SELECT MOVIE_CODE, MOVIE_TITLE, MOVIE_DIRECTOR, MOVIE_SCREEN, ROWNUM AS rnum
        FROM MOVIE
    )
    WHERE rnum &lt;= #{end}
)
WHERE row_num &gt;= #{start}


    </select>

</mapper>
